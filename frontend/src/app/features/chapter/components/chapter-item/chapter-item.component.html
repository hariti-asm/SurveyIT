<div class="chapter-card">
  <div class="chapter">
    <div class="chapter-header" (click)="toggleChapter()">
      <span class="expand-icon">{{ isExpanded ? '▼' : '▶' }}</span>
      <h3>{{ chapter.title }}</h3>
    </div>

    @if (isExpanded && chapter.subChapters?.length) {
      <div class="sub-chapters">
        @for (subChapter of chapter.subChapters; track subChapter.id) {
          <div
            class="sub-chapter-item"
            [class.active]="selectedSubChapterId === subChapter.id"
            (click)="onSubChapterClick(subChapter)">
            <h5>{{ subChapter.title }}</h5>
          </div>
        }
      </div>
    }
  </div>
</div>
